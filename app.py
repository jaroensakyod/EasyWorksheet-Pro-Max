# app.py (EasyWorksheet Pro Max - Thai Version with Full IPST Curriculum)
import streamlit as st
import os
import sys
from PIL import Image
import google.generativeai as genai

# Config path for local files
EXPORT_DIR = os.path.dirname(os.path.abspath(__file__))

# Add the current directory to path so we can import backend
sys.path.append(EXPORT_DIR)
from backend import WorksheetGenerator

# Initialize Generator
try:
    api_key = st.secrets.get("GEMINI_API_KEY", None)
except:
    api_key = None

# Session State for API Key and Provider
if "api_key" not in st.session_state:
    st.session_state.api_key = api_key
if "api_provider" not in st.session_state:
    st.session_state.api_provider = "Google Gemini"  # Default provider

# Session state for generated content (persist download buttons)
if "generated_pdf" not in st.session_state:
    st.session_state.generated_pdf = None
if "generated_word" not in st.session_state:
    st.session_state.generated_word = None
if "generated_filename" not in st.session_state:
    st.session_state.generated_filename = "worksheet"

generator = WorksheetGenerator(ai_api_key=st.session_state.api_key, provider=st.session_state.api_provider)

st.set_page_config(page_title="‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô EasyWorksheet", page_icon="üöÄ", layout="wide")

st.title("üöÄ ‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô EasyWorksheet")
st.caption("‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏î‡πâ‡∏ß‡∏¢ AI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏π‡∏¢‡∏∏‡∏Ñ‡πÉ‡∏´‡∏°‡πà (Created by Nong Aom & P'Em)")

# --- API Key Section (Always Visible) ---
with st.expander("üîë ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ API Key", expanded=not st.session_state.api_key):
    # Provider Selection Dropdown
    provider_options = ["Google Gemini", "Groq", "OpenRouter"]
    selected_provider = st.selectbox(
        "üîΩ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ AI:",
        options=provider_options,
        index=provider_options.index(st.session_state.api_provider) if st.session_state.api_provider in provider_options else 0
    )
    
    # Store selected provider in session state
    if selected_provider != st.session_state.api_provider:
        st.session_state.api_provider = selected_provider
        # Clear API key when switching providers
        st.session_state.api_key = None
        st.rerun()
    
    if not st.session_state.api_key:
        # Conditional API key input based on selected provider
        if selected_provider == "Google Gemini":
            api_input = st.text_input("üîë ‡πÉ‡∏™‡πà Google Gemini API Key", type="password", placeholder="AIza...")
            st.markdown("[üëâ ‡∏Å‡∏î‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏£‡∏±‡∏ö API Key ‡∏ü‡∏£‡∏µ (Google AI Studio)](https://aistudio.google.com/app/apikey)")
        elif selected_provider == "Groq":
            api_input = st.text_input("üîë ‡πÉ‡∏™‡πà Groq API Key", type="password", placeholder="gsk_...")
            st.markdown("[üëâ ‡∏Å‡∏î‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏£‡∏±‡∏ö API Key (Groq Console)](https://console.groq.com)")
        elif selected_provider == "OpenRouter":
            api_input = st.text_input("üîë ‡πÉ‡∏™‡πà OpenRouter API Key", type="password", placeholder="sk-or-v1-...")
            st.markdown("[üëâ ‡∏Å‡∏î‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏£‡∏±‡∏ö API Key (OpenRouter)](https://openrouter.ai)")
        
        if api_input:
            clean_key = api_input.strip()
            try:
                # Configure and test based on provider
                if selected_provider == "Google Gemini":
                    genai.configure(api_key=clean_key)
                    list(genai.list_models())  # Test call
                # For Groq and OpenRouter, we'll test through the generator
                
                st.session_state.api_key = clean_key
                st.session_state.api_provider = selected_provider
                st.success(f"‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö {selected_provider} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!")
                st.rerun()
            except Exception as e:
                st.error(f"‚ùå API Key ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á: {e}")
    else:
        st.success(f"‚úÖ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö {st.session_state.api_provider} ‡πÅ‡∏•‡πâ‡∏ß")
        if st.button("üóëÔ∏è ‡∏•‡∏ö API Key"):
            st.session_state.api_key = None
            st.session_state.api_provider = "Google Gemini"  # Reset to default
            st.rerun()

# Re-init generator if key is present
if st.session_state.api_key:
    generator = WorksheetGenerator(ai_api_key=st.session_state.api_key, provider=st.session_state.api_provider)

# --- Settings Sidebar ---
with st.sidebar:
    st.header("‚öôÔ∏è ‡πÅ‡∏ú‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° (Control Panel)")
    
    school_name = st.text_input("üè´ ‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô / ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏£‡∏π", "‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á")
    
    uploaded_logo = st.file_uploader("üñºÔ∏è ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÇ‡∏•‡πÇ‡∏Å‡πâ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)", type=["png", "jpg", "jpeg"])
    
    st.markdown("---")
    
    # Mode Selection (Thai)
    mode_options = [
        "üìê ‡∏ù‡∏∂‡∏Å‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå (Math)",
        "üî¨ ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå (Science)",
        "üìö ‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ (Thai Language)",
        "üåè ‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© (English Language)",
        "ü§ñ ‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤ AI (Word Problems)",
        "üîç ‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏´‡∏≤‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå (Word Search)",
        "‚úçÔ∏è ‡∏ù‡∏∂‡∏Å‡∏Ñ‡∏±‡∏î‡∏•‡∏≤‡∏¢‡∏°‡∏∑‡∏≠ (Handwriting)",
        "üìù ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå (File to Quiz)"
    ]
    mode_select = st.selectbox("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÉ‡∏ö‡∏á‡∏≤‡∏ô:", mode_options)
    
    title = st.text_input("‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÉ‡∏ö‡∏á‡∏≤‡∏ô", "‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏ó‡∏µ‡πà 1")
    
    include_qr = st.checkbox("‡πÄ‡∏û‡∏¥‡πà‡∏° QR Code ‡πÄ‡∏â‡∏•‡∏¢?", value=True)
    qr_url = st.text_input("‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÄ‡∏â‡∏•‡∏¢ (‡πÄ‡∏ä‡πà‡∏ô Google Drive)", "https://example.com/answers") if include_qr else None

# --- API Check Function ---
def check_api_required():
    """Check if API key is required for current selection"""
    if st.session_state.api_key:
        return False  # API is available
    
    # List of modes/topics that require API
    ai_required_modes = [
        "‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤ AI",
        "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå"
    ]
    
    # Check mode first
    for mode in ai_required_modes:
        if mode in mode_select:
            return True
    
    # Check if topic requires AI
    if "üåü" in mode_select:
        return True
    
    return False

def show_api_warning():
    """Show yellow warning popup for missing API"""
    provider_name = st.session_state.api_provider if st.session_state.api_provider else "AI"
    st.warning(f"‚ö†Ô∏è **‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ {provider_name} API Key** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏Ñ‡πà‡∏∞!", icon="üîë")
    st.info("üìå ‡∏Å‡∏£‡∏≠‡∏Å API Key ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ô‡∏µ‡πâ‡πÄ‡∏•‡∏¢‡∏Ñ‡πà‡∏∞")
    
    # Show appropriate link based on provider
    if st.session_state.api_provider == "Google Gemini":
        st.markdown("[üëâ ‡∏Ç‡∏≠ API Key ‡∏ü‡∏£‡∏µ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà (Google AI Studio)](https://aistudio.google.com/app/apikey)")
    elif st.session_state.api_provider == "Groq":
        st.markdown("[üëâ ‡∏Ç‡∏≠ API Key ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà (Groq Console)](https://console.groq.com)")
    elif st.session_state.api_provider == "OpenRouter":
        st.markdown("[üëâ ‡∏Ç‡∏≠ API Key ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà (OpenRouter)](https://openrouter.ai)")

# --- Main Content Area ---

if "‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå" in mode_select:
    st.subheader("üìê ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå (‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£ ‡∏™‡∏™‡∏ß‡∏ó.)")
    
    # Grade Selection
    grade_options = ["‡∏õ.1", "‡∏õ.2", "‡∏õ.3", "‡∏õ.4", "‡∏õ.5", "‡∏õ.6", "‡∏°.1", "‡∏°.2", "‡∏°.3", "‡∏°.4", "‡∏°.5", "‡∏°.6"]
    grade_select = st.selectbox("üìö ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô:", grade_options)
    
    # Full IPST Curriculum by Grade
    ipst_topics = {
        # ===== ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤ =====
        "‡∏õ.1": [
            ("1Ô∏è‚É£", "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏ö 1 ‡∏ñ‡∏∂‡∏á 5 ‡πÅ‡∏•‡∏∞ 0", "calculation"),
            ("2Ô∏è‚É£", "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏ö 6 ‡∏ñ‡∏∂‡∏á 9", "calculation"),
            ("3Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏≠‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡∏•‡∏ö‡∏ß‡∏Å‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 9", "calculation"),
            ("4Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏≠‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡∏±‡∏ß‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 9", "calculation"),
            ("5Ô∏è‚É£", "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏ö 10 ‡∏ñ‡∏∂‡∏á 20", "calculation"),
            ("6Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 20", "calculation"),
            ("7Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß üåü", "ai"),
            ("8Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ä‡∏±‡πà‡∏á üåü", "ai"),
            ("9Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ï‡∏ß‡∏á üåü", "ai"),
            ("üîü", "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏ö 21 ‡∏ñ‡∏∂‡∏á 100", "calculation"),
            ("1Ô∏è‚É£1Ô∏è‚É£", "‡∏£‡∏π‡∏õ‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï üåü", "ai"),
            ("1Ô∏è‚É£2Ô∏è‚É£", "‡πÄ‡∏ß‡∏•‡∏≤ üåü", "ai"),
            ("1Ô∏è‚É£3Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 100", "calculation"),
            ("1Ô∏è‚É£4Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å ‡∏•‡∏ö‡∏£‡∏∞‡∏Ñ‡∏ô", "calculation"),
        ],
        "‡∏õ.2": [
            ("1Ô∏è‚É£", "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏ö‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 1,000", "calculation"),
            ("2Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 100", "calculation"),
            ("3Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß üåü", "ai"),
            ("4Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 1,000", "calculation"),
            ("5Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ä‡∏±‡πà‡∏á üåü", "ai"),
            ("6Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏Ñ‡∏π‡∏ì", "calculation"),
            ("7Ô∏è‚É£", "‡πÄ‡∏ß‡∏•‡∏≤ üåü", "ai"),
            ("8Ô∏è‚É£", "‡πÄ‡∏á‡∏¥‡∏ô üåü", "ai"),
            ("9Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£", "calculation"),
            ("üîü", "‡∏Å‡∏≤‡∏£‡∏ï‡∏ß‡∏á üåü", "ai"),
            ("1Ô∏è‚É£1Ô∏è‚É£", "‡∏£‡∏π‡∏õ‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï üåü", "ai"),
            ("1Ô∏è‚É£2Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å ‡∏•‡∏ö ‡∏Ñ‡∏π‡∏ì ‡∏´‡∏≤‡∏£‡∏£‡∏∞‡∏Ñ‡∏ô", "calculation"),
        ],
        "‡∏õ.3": [
            ("1Ô∏è‚É£", "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏ö‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 100,000", "calculation"),
            ("2Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡∏ß‡∏ï‡∏±‡πâ‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏ô 100,000", "calculation"),
            ("3Ô∏è‚É£", "‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏ó‡πà‡∏á üåü", "ai"),
            ("4Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß üåü", "ai"),
            ("5Ô∏è‚É£", "‡πÄ‡∏ß‡∏•‡∏≤ üåü", "ai"),
            ("6Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ä‡∏±‡πà‡∏á ‡∏Å‡∏≤‡∏£‡∏ï‡∏ß‡∏á üåü", "ai"),
            ("7Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏Ñ‡∏π‡∏ì", "calculation"),
            ("8Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£", "calculation"),
            ("9Ô∏è‚É£", "‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ üåü", "ai"),
            ("üîü", "‡∏à‡∏∏‡∏î ‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á ‡∏£‡∏±‡∏á‡∏™‡∏µ ‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏£‡∏á ‡∏°‡∏∏‡∏° üåü", "ai"),
            ("1Ô∏è‚É£1Ô∏è‚É£", "‡∏£‡∏π‡∏õ‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï üåü", "ai"),
            ("1Ô∏è‚É£2Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å ‡∏•‡∏ö ‡∏Ñ‡∏π‡∏ì ‡∏´‡∏≤‡∏£‡∏£‡∏∞‡∏Ñ‡∏ô", "calculation"),
        ],
        "‡∏õ.4": [
            ("1Ô∏è‚É£", "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏ö‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 100,000", "calculation"),
            ("2Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏•‡∏ö", "calculation"),
            ("3Ô∏è‚É£", "‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï üåü", "ai"),
            ("4Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏Ñ‡∏π‡∏ì", "calculation"),
            ("5Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£", "calculation"),
            ("6Ô∏è‚É£", "‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û ‡πÅ‡∏ú‡∏ô‡∏†‡∏π‡∏°‡∏¥‡πÅ‡∏ó‡πà‡∏á ‡πÅ‡∏•‡∏∞‡∏ï‡∏≤‡∏£‡∏≤‡∏á üåü", "ai"),
            ("7Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î üåü", "ai"),
            ("8Ô∏è‚É£", "‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà üåü", "ai"),
            ("9Ô∏è‚É£", "‡πÄ‡∏á‡∏¥‡∏ô üåü", "ai"),
            ("üîü", "‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô", "calculation"),
            ("1Ô∏è‚É£1Ô∏è‚É£", "‡πÄ‡∏ß‡∏•‡∏≤ üåü", "ai"),
            ("1Ô∏è‚É£2Ô∏è‚É£", "‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°", "calculation"),
            ("1Ô∏è‚É£3Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å ‡∏•‡∏ö ‡∏Ñ‡∏π‡∏ì ‡∏´‡∏≤‡∏£‡∏£‡∏∞‡∏Ñ‡∏ô", "calculation"),
        ],
        "‡∏õ.5": [
            ("1Ô∏è‚É£", "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏ö ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å ‡∏Å‡∏≤‡∏£‡∏•‡∏ö ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏π‡∏ì ‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£", "calculation"),
            ("2Ô∏è‚É£", "‡∏°‡∏∏‡∏° üåü", "ai"),
            ("3Ô∏è‚É£", "‡πÄ‡∏™‡πâ‡∏ô‡∏Ç‡∏ô‡∏≤‡∏ô üåü", "ai"),
            ("4Ô∏è‚É£", "‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô üåü", "ai"),
            ("5Ô∏è‚É£", "‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô", "calculation"),
            ("6Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å ‡∏Å‡∏≤‡∏£‡∏•‡∏ö ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏π‡∏ì ‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô", "calculation"),
            ("7Ô∏è‚É£", "‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°", "calculation"),
            ("8Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å ‡∏Å‡∏≤‡∏£‡∏•‡∏ö ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏π‡∏ì‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°", "calculation"),
            ("9Ô∏è‚É£", "‡∏ö‡∏ó‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå üåü", "ai"),
            ("üîü", "‡∏£‡∏π‡∏õ‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏° üåü", "ai"),
            ("1Ô∏è‚É£1Ô∏è‚É£", "‡∏£‡∏π‡∏õ‡∏™‡∏≤‡∏°‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏° üåü", "ai"),
            ("1Ô∏è‚É£2Ô∏è‚É£", "‡∏£‡∏π‡∏õ‡∏ß‡∏á‡∏Å‡∏•‡∏° üåü", "ai"),
            ("1Ô∏è‚É£3Ô∏è‚É£", "‡∏£‡∏π‡∏õ‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏™‡∏≤‡∏°‡∏°‡∏¥‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£‡∏Ç‡∏≠‡∏á‡∏ó‡∏£‡∏á‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏∏‡∏°‡∏â‡∏≤‡∏Å üåü", "ai"),
        ],
        "‡∏õ.6": [
            ("1Ô∏è‚É£", "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏ö ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å ‡∏Å‡∏≤‡∏£‡∏•‡∏ö ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏π‡∏ì ‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£", "calculation"),
            ("2Ô∏è‚É£", "‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ô‡∏±‡∏ö üåü", "ai"),
            ("3Ô∏è‚É£", "‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å ‡∏Å‡∏≤‡∏£‡∏•‡∏ö ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏π‡∏ì ‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£", "calculation"),
            ("4Ô∏è‚É£", "‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°", "calculation"),
            ("5Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ö‡∏ß‡∏Å ‡∏Å‡∏≤‡∏£‡∏•‡∏ö ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏π‡∏ì ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°", "calculation"),
            ("6Ô∏è‚É£", "‡πÄ‡∏™‡πâ‡∏ô‡∏Ç‡∏ô‡∏≤‡∏ô üåü", "ai"),
            ("7Ô∏è‚É£", "‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏™‡∏°‡∏Å‡∏≤‡∏£ üåü", "ai"),
            ("8Ô∏è‚É£", "‡∏ó‡∏¥‡∏® ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÅ‡∏ú‡∏ô‡∏ú‡∏±‡∏á üåü", "ai"),
            ("9Ô∏è‚É£", "‡∏£‡∏π‡∏õ‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏° üåü", "ai"),
            ("üîü", "‡∏£‡∏π‡∏õ‡∏ß‡∏á‡∏Å‡∏•‡∏° üåü", "ai"),
            ("1Ô∏è‚É£1Ô∏è‚É£", "‡∏ö‡∏ó‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏Å‡∏ï‡πå üåü", "ai"),
            ("1Ô∏è‚É£2Ô∏è‚É£", "‡∏£‡∏π‡∏õ‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏™‡∏≤‡∏°‡∏°‡∏¥‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ï‡∏£‡∏Ç‡∏≠‡∏á‡∏ó‡∏£‡∏á‡∏™‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏∏‡∏°‡∏â‡∏≤‡∏Å üåü", "ai"),
            ("1Ô∏è‚É£3Ô∏è‚É£", "‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô üåü", "ai"),
        ],
        
        # ===== ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡∏≠‡∏ô‡∏ï‡πâ‡∏ô =====
        "‡∏°.1": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ï‡πá‡∏°", "calculation"),
                ("2Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏≤‡∏á‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï üåü", "ai"),
                ("3Ô∏è‚É£", "‡πÄ‡∏•‡∏Ç‡∏¢‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á", "calculation"),
                ("4Ô∏è‚É£", "‡∏ó‡∏®‡∏ô‡∏¥‡∏¢‡∏°‡πÅ‡∏•‡∏∞‡πÄ‡∏®‡∏©‡∏™‡πà‡∏ß‡∏ô", "calculation"),
                ("5Ô∏è‚É£", "‡∏£‡∏π‡∏õ‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï 2 ‡∏°‡∏¥‡∏ï‡∏¥‡πÅ‡∏•‡∏∞ 3 ‡∏°‡∏¥‡∏ï‡∏¥ üåü", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏ß üåü", "ai"),
                ("2Ô∏è‚É£", "‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô ‡πÅ‡∏•‡∏∞‡∏£‡πâ‡∏≠‡∏¢‡∏•‡∏∞", "calculation"),
                ("3Ô∏è‚É£", "‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏™‡πâ‡∏ô üåü", "ai"),
                ("4Ô∏è‚É£", "‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ (1) üåü", "ai"),
            ]
        },
        "‡∏°.2": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏ö‡∏ó‡∏û‡∏µ‡∏ó‡∏≤‡πÇ‡∏Å‡∏£‡∏±‡∏™ üåü", "ai"),
                ("2Ô∏è‚É£", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏π‡πâ‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏£‡∏¥‡∏á üåü", "ai"),
                ("3Ô∏è‚É£", "‡∏õ‡∏£‡∏¥‡∏ã‡∏∂‡∏°‡πÅ‡∏•‡∏∞‡∏ó‡∏£‡∏á‡∏Å‡∏£‡∏∞‡∏ö‡∏≠‡∏Å üåü", "ai"),
                ("4Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÅ‡∏õ‡∏•‡∏á‡∏ó‡∏≤‡∏á‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï üåü", "ai"),
                ("5Ô∏è‚É£", "‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡∏Ç‡∏¢‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á", "calculation"),
                ("6Ô∏è‚É£", "‡∏û‡∏´‡∏∏‡∏ô‡∏≤‡∏° üåü", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ (2) üåü", "ai"),
                ("2Ô∏è‚É£", "‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ô‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏£ üåü", "ai"),
                ("3Ô∏è‚É£", "‡πÄ‡∏™‡πâ‡∏ô‡∏Ç‡∏ô‡∏≤‡∏ô üåü", "ai"),
                ("4Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏ï‡∏∏‡∏ú‡∏•‡∏ó‡∏≤‡∏á‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï üåü", "ai"),
                ("5Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏û‡∏´‡∏∏‡∏ô‡∏≤‡∏°‡∏î‡∏µ‡∏Å‡∏£‡∏µ‡∏™‡∏≠‡∏á üåü", "ai"),
            ]
        },
        "‡∏°.3": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "‡∏≠‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏ß üåü", "ai"),
                ("2Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏û‡∏´‡∏∏‡∏ô‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏î‡∏µ‡∏Å‡∏£‡∏µ‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏™‡∏≠‡∏á üåü", "ai"),
                ("3Ô∏è‚É£", "‡∏™‡∏°‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏î‡∏µ‡∏¢‡∏ß üåü", "ai"),
                ("4Ô∏è‚É£", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢ üåü", "ai"),
                ("5Ô∏è‚É£", "‡∏Å‡∏£‡∏≤‡∏ü‡∏Ç‡∏≠‡∏á‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏≠‡∏á üåü", "ai"),
                ("6Ô∏è‚É£", "‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥ (3) üåü", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏¥‡∏á‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ üåü", "ai"),
                ("2Ô∏è‚É£", "‡∏ß‡∏á‡∏Å‡∏•‡∏° üåü", "ai"),
                ("3Ô∏è‚É£", "‡∏û‡∏µ‡∏£‡∏∞‡∏°‡∏¥‡∏î ‡∏Å‡∏£‡∏ß‡∏¢ ‡πÅ‡∏•‡∏∞‡∏ó‡∏£‡∏á‡∏Å‡∏•‡∏° üåü", "ai"),
                ("4Ô∏è‚É£", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô üåü", "ai"),
                ("5Ô∏è‚É£", "‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì‡∏°‡∏¥‡∏ï‡∏¥ üåü", "ai"),
            ]
        },
        
        # ===== ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡∏≠‡∏ô‡∏õ‡∏•‡∏≤‡∏¢ =====
        "‡∏°.4": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "‡πÄ‡∏ã‡∏ï üåü", "ai"),
                ("2Ô∏è‚É£", "‡∏ï‡∏£‡∏£‡∏Å‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå üåü", "ai"),
                ("3Ô∏è‚É£", "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏à‡∏£‡∏¥‡∏á üåü", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡πÅ‡∏•‡∏∞‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô üåü", "ai"),
                ("2Ô∏è‚É£", "‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏≠‡∏Å‡∏ã‡πå‡πÇ‡∏û‡πÄ‡∏ô‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏•‡πÅ‡∏•‡∏∞‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏•‡∏≠‡∏Å‡∏≤‡∏£‡∏¥‡∏ó‡∏∂‡∏° üåü", "ai"),
                ("3Ô∏è‚É£", "‡πÄ‡∏£‡∏Ç‡∏≤‡∏Ñ‡∏ì‡∏¥‡∏ï‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏Ñ‡∏ï‡∏±‡∏î‡∏Å‡∏£‡∏ß‡∏¢ üåü", "ai"),
            ]
        },
        "‡∏°.5": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏µ‡πÇ‡∏Å‡∏ì‡∏°‡∏¥‡∏ï‡∏¥ üåü", "ai"),
                ("2Ô∏è‚É£", "‡πÄ‡∏°‡∏ó‡∏£‡∏¥‡∏Å‡∏ã‡πå üåü", "ai"),
                ("3Ô∏è‚É£", "‡πÄ‡∏ß‡∏Å‡πÄ‡∏ï‡∏≠‡∏£‡πå üåü", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡∏ã‡πâ‡∏≠‡∏ô üåü", "ai"),
                ("2Ô∏è‚É£", "‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡∏ö‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô üåü", "ai"),
                ("3Ô∏è‚É£", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô üåü", "ai"),
            ]
        },
        "‡∏°.6": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡∏≠‡∏ô‡∏∏‡∏Å‡∏£‡∏° üåü", "ai"),
                ("2Ô∏è‚É£", "‡πÅ‡∏Ñ‡∏•‡∏Ñ‡∏π‡∏•‡∏±‡∏™‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô üåü", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• üåü", "ai"),
                ("2Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ä‡∏¥‡∏á‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û üåü", "ai"),
                ("3Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏ä‡∏¥‡∏á‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì üåü", "ai"),
                ("4Ô∏è‚É£", "‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡∏Å‡πÅ‡∏à‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô üåü", "ai"),
            ]
        },
    }
    
    # Check if grade is ‡∏°.1-6 (has terms)
    if grade_select in ["‡∏°.1", "‡∏°.2", "‡∏°.3", "‡∏°.4", "‡∏°.5", "‡∏°.6"]:
        # Select term first
        term_options = list(ipst_topics[grade_select].keys())
        term_select = st.selectbox("üìÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ó‡∏≠‡∏°:", term_options)
        topics = ipst_topics[grade_select][term_select]
    else:
        # Primary school grades
        topics = ipst_topics.get(grade_select, [])
    
    # Topic selection with display names
    topic_options = [f"{prefix} {name}" for prefix, name, _ in topics]
    topic_select = st.selectbox("üìñ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠:", topic_options)
    
    # Get selected topic details
    selected_topic = None
    selected_type = None
    for prefix, name, topic_type in topics:
        full_name = f"{prefix} {name}"
        if full_name == topic_select:
            selected_topic = name
            selected_type = topic_type
            break
    
    # Settings based on topic type
    if selected_type == "calculation":
        # Math settings
        if "‡∏Å‡∏≤‡∏£‡∏Ñ‡∏π‡∏ì" in selected_topic:
            op_label = "‡∏Ñ‡∏π‡∏ì (x)"
        elif "‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏£" in selected_topic:
            op_label = "‡∏´‡∏≤‡∏£ (√∑)"
        elif "‡∏Å‡∏≤‡∏£‡∏•‡∏ö" in selected_topic or "‡∏•‡∏ö‡∏£‡∏∞‡∏Ñ‡∏ô" in selected_topic:
            op_label = "‡∏•‡∏ö (-)"
        elif "‡∏ö‡∏ß‡∏Å" in selected_topic or "‡∏£‡∏∞‡∏Ñ‡∏ô" in selected_topic:
            op_label = "‡∏ö‡∏ß‡∏Å (+)"
        else:
            op_label = st.selectbox("‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢", ["‡∏ö‡∏ß‡∏Å (+)", "‡∏•‡∏ö (-)", "‡∏Ñ‡∏π‡∏ì (x)", "‡∏´‡∏≤‡∏£ (√∑)"])
        
        # Map Thai label to English key for backend
        op_map = {"‡∏ö‡∏ß‡∏Å (+)": "Addition (+)", "‡∏•‡∏ö (-)": "Subtraction (-)", "‡∏Ñ‡∏π‡∏ì (x)": "Multiplication (x)", "‡∏´‡∏≤‡∏£ (√∑)": "Division (√∑)"}
        op = op_map.get(op_label, "Addition (+)")
        
        # Auto-config ranges based on grade
        d_min, d_max = 1, 20
        if grade_select == "‡∏õ.1":
            if "10 ‡∏ñ‡∏∂‡∏á 20" in selected_topic:
                d_min, d_max = 10, 20
            elif "21 ‡∏ñ‡∏∂‡∏á 100" in selected_topic:
                d_min, d_max = 21, 100
            else:
                d_min, d_max = 1, 20
        elif grade_select == "‡∏õ.2":
            if "1,000" in selected_topic:
                d_min, d_max = 100, 1000
            else:
                d_min, d_max = 1, 100
        elif grade_select == "‡∏õ.3":
            d_min, d_max = 10, 100000
        elif grade_select in ["‡∏õ.4", "‡∏õ.5", "‡∏õ.6"]:
            d_min, d_max = 100, 100000
        
        num_q = st.slider("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠", 10, 50, 20)
        
        if st.button("üöÄ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô", type="primary"):
            # Check if AI is required
            if selected_type == "ai":
                if not st.session_state.api_key:
                    st.info("üîë ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ API Key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ‡∏Ñ‡πà‡∏∞ ‡∏Å‡∏£‡∏≠‡∏Å API Key ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏∞")
                else:
                    # AI generation
                    questions, answers = generator.generate_ai_worksheet(selected_topic, grade_select, num_q)
                    pdf = generator.create_pdf(title, school_name, selected_topic, questions, answers, qr_url, uploaded_logo)
                    word = generator.create_word_doc(title, school_name, selected_topic, questions, answers)
                    
                    st.session_state.generated_pdf = pdf
                    st.session_state.generated_word = word
                    st.session_state.generated_filename = "worksheet"
            else:
                # Calculation generation (no AI needed)
                questions, answers = generator.generate_questions(op, num_q, d_min, d_max)
                pdf = generator.create_pdf(title, school_name, selected_topic, questions, answers, qr_url, uploaded_logo)
                word = generator.create_word_doc(title, school_name, selected_topic, questions, answers)
                
                st.session_state.generated_pdf = pdf
                st.session_state.generated_word = word
                st.session_state.generated_filename = "worksheet"
        
        # Show download buttons if content is generated
        if st.session_state.generated_pdf is not None:
            st.success("‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á")
            c1, c2 = st.columns(2)
            c1.download_button("üìÑ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î PDF", st.session_state.generated_pdf, f"{st.session_state.generated_filename}.pdf", "application/pdf")
            c2.download_button("üìù ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Word", st.session_state.generated_word, f"{st.session_state.generated_filename}.docx", "application/vnd.openxmlformats-officedocument.wordprocessingml.document")
            
            if st.button("üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà"):
                st.session_state.generated_pdf = None
                st.session_state.generated_word = None
                st.rerun()
    
    else:  # AI required topic
        st.info(f"üìå ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ AI ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏Ñ‡πà‡∏∞")
        st.markdown("‚ÑπÔ∏è **‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà‡∏°‡∏µ üåü ‡∏à‡∏∞‡πÉ‡∏ä‡πâ Google AI ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÅ‡∏•‡∏∞‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢")
        
        num_q = st.slider("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠", 10, 50, 20)
        
        if st.button("üöÄ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô", type="primary"):
            if not st.session_state.api_key:
                st.info("üîë ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ API Key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ô‡∏µ‡πâ‡∏Ñ‡πà‡∏∞ ‡∏Å‡∏£‡∏≠‡∏Å API Key ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏∞")
            else:
                with st.spinner("ü§ñ AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î..."):
                    questions, answers = generator.generate_ai_worksheet(selected_topic, grade_select, num_q)
                    pdf = generator.create_pdf(title, school_name, selected_topic, questions, answers, qr_url, uploaded_logo)
                    word = generator.create_word_doc(title, school_name, selected_topic, questions, answers)
                    
                    st.session_state.generated_pdf = pdf
                    st.session_state.generated_word = word
                    st.session_state.generated_filename = "worksheet"
        
        # Show download buttons if content is generated
        if st.session_state.generated_pdf is not None:
            st.success("‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á")
            c1, c2 = st.columns(2)
            c1.download_button("üìÑ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î PDF", st.session_state.generated_pdf, f"{st.session_state.generated_filename}.pdf", "application/pdf")
            c2.download_button("üìù ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Word", st.session_state.generated_word, f"{st.session_state.generated_filename}.docx", "application/vnd.openxmlformats-officedocument.wordprocessingml.document")
            
            if st.button("üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà"):
                st.session_state.generated_pdf = None
                st.session_state.generated_word = None
                st.rerun()

elif "‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå" in mode_select:
    st.subheader("üî¨ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå (‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£ ‡∏™‡∏™‡∏ß‡∏ó.)")
    
    # Science Curriculum Data
    science_topics = {
        # ===== ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤ =====
        "‡∏õ.1": [
            ("1Ô∏è‚É£", "‡∏™‡∏¥‡πà‡∏á‡∏ï‡πà‡∏≤‡∏á‡∏£‡∏≠‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏£‡∏≤ (‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï, ‡∏™‡∏¥‡πà‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï, ‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏™‡∏î‡∏∏) üåü", "ai"),
            ("2Ô∏è‚É£", "‡∏û‡∏∑‡∏ä‡∏£‡∏≠‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏£‡∏≤ (‡∏™‡πà‡∏ß‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡∏ä, ‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï) üåü", "ai"),
            ("3Ô∏è‚É£", "‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏£‡∏≠‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏£‡∏≤ (‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡∏ô‡∏¥‡∏î, ‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏™‡∏±‡∏ï‡∏ß‡πå) üåü", "ai"),
            ("4Ô∏è‚É£", "‡∏î‡∏ß‡∏á‡∏î‡∏≤‡∏ß‡πÅ‡∏•‡∏∞‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤ (‡∏î‡∏ß‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå, ‡∏î‡∏ß‡∏á‡∏à‡∏±‡∏ô‡∏ó‡∏£‡πå, ‡∏î‡∏ß‡∏á‡∏î‡∏≤‡∏ß) üåü", "ai"),
            ("5Ô∏è‚É£", "‡∏™‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏Å‡∏≤‡∏® (‡∏´‡∏ô‡∏≤‡∏ß, ‡∏£‡πâ‡∏≠‡∏ô, ‡∏ù‡∏ô, ‡∏•‡∏°) üåü", "ai"),
        ],
        "‡∏õ.2": [
            ("1Ô∏è‚É£", "‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡∏£‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï (‡∏≠‡∏≤‡∏´‡∏≤‡∏£, ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏≠‡∏≤‡∏®‡∏±‡∏¢, ‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡∏ö‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå) üåü", "ai"),
            ("2Ô∏è‚É£", "‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° (‡πÅ‡∏™‡∏á, ‡πÄ‡∏™‡∏µ‡∏¢‡∏á, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô) üåü", "ai"),
            ("3Ô∏è‚É£", "‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏Å‡∏≤‡∏® (‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ç‡∏≠‡∏á‡∏ô‡πâ‡∏≥, ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡∏ù‡∏ô) üåü", "ai"),
            ("4Ô∏è‚É£", "‡∏î‡∏¥‡∏ô (‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏î‡∏¥‡∏ô, ‡∏ä‡∏ô‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏î‡∏¥‡∏ô) üåü", "ai"),
            ("5Ô∏è‚É£", "‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏≤‡∏Å‡∏≤‡∏® (‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï‡πÄ‡∏°‡∏Ü, ‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏≤‡∏Å‡∏≤‡∏®) üåü", "ai"),
        ],
        "‡∏õ.3": [
            ("1Ô∏è‚É£", "‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ (‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡πà‡∏≠‡∏¢‡∏≠‡∏≤‡∏´‡∏≤‡∏£, ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏≤‡∏¢‡πÉ‡∏à) üåü", "ai"),
            ("2Ô∏è‚É£", "‡∏û‡∏∑‡∏ä‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡∏£‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï (‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏á‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏î‡πâ‡∏ß‡∏¢‡πÅ‡∏™‡∏á, ‡∏Å‡∏≤‡∏£‡∏Ç‡∏¢‡∏≤‡∏¢‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå) üåü", "ai"),
            ("3Ô∏è‚É£", "‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° (‡∏´‡πà‡∏ß‡∏á‡πÇ‡∏ã‡πà‡∏≠‡∏≤‡∏´‡∏≤‡∏£, ‡∏™‡∏°‡∏î‡∏∏‡∏•‡πÉ‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥) üåü", "ai"),
            ("4Ô∏è‚É£", "‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏£‡∏≠‡∏ö‡∏ï‡∏±‡∏ß (‡πÇ‡∏•‡∏´‡∏∞, ‡πÑ‡∏°‡πâ, ‡∏û‡∏•‡∏≤‡∏™‡∏ï‡∏¥‡∏Å) üåü", "ai"),
            ("5Ô∏è‚É£", "‡πÅ‡∏£‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà (‡πÅ‡∏£‡∏á‡∏ú‡∏•‡∏±‡∏Å, ‡πÅ‡∏£‡∏á‡∏î‡∏∂‡∏á, ‡πÅ‡∏£‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏î‡∏ó‡∏≤‡∏ô) üåü", "ai"),
            ("6Ô∏è‚É£", "‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô (‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô, ‡πÅ‡∏™‡∏á, ‡πÄ‡∏™‡∏µ‡∏¢‡∏á) üåü", "ai"),
        ],
        "‡∏õ.4": [
            ("1Ô∏è‚É£", "‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢ (‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î, ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏±‡∏ö‡∏ñ‡πà‡∏≤‡∏¢) üåü", "ai"),
            ("2Ô∏è‚É£", "‡∏û‡∏∑‡∏ä‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢ (‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡πÅ‡∏ô‡∏Å‡∏û‡∏∑‡∏ä, ‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡∏ö‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏û‡∏∑‡∏ä) üåü", "ai"),
            ("3Ô∏è‚É£", "‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° (‡πÅ‡∏´‡∏•‡πà‡∏á‡∏ô‡πâ‡∏≥, ‡∏´‡πà‡∏ß‡∏á‡πÇ‡∏ã‡πà‡∏≠‡∏≤‡∏´‡∏≤‡∏£) üåü", "ai"),
            ("4Ô∏è‚É£", "‡∏™‡∏™‡∏≤‡∏£ (‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞, ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á) üåü", "ai"),
            ("5Ô∏è‚É£", "‡πÅ‡∏£‡∏á‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô (‡πÅ‡∏£‡∏á‡πÉ‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥, ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏î‡∏±‡∏ô‡∏≠‡∏≤‡∏Å‡∏≤‡∏®) üåü", "ai"),
            ("6Ô∏è‚É£", "‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ (‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô, ‡∏ß‡∏á‡∏à‡∏£‡πÑ‡∏ü‡∏ü‡πâ‡∏≤) üåü", "ai"),
        ],
        "‡∏õ.5": [
            ("1Ô∏è‚É£", "‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û (‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô, ‡∏Å‡∏≤‡∏£‡πÄ‡∏à‡∏£‡∏¥‡∏ç‡πÄ‡∏ï‡∏¥‡∏ö‡πÇ‡∏ï) üåü", "ai"),
            ("2Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡∏ö‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå (‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡∏ö‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏™‡∏±‡∏ï‡∏ß‡πå, ‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡∏ö‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡∏û‡∏∑‡∏ä) üåü", "ai"),
            ("3Ô∏è‚É£", "‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° (‡∏Å‡∏≤‡∏£‡∏ñ‡πà‡∏≤‡∏¢‡∏ó‡∏≠‡∏î‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô, ‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°) üåü", "ai"),
            ("4Ô∏è‚É£", "‡∏™‡∏™‡∏≤‡∏£ (‡∏≠‡∏∞‡∏ï‡∏≠‡∏°, ‡∏ò‡∏≤‡∏ï‡∏∏, ‡∏™‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö) üåü", "ai"),
            ("5Ô∏è‚É£", "‡πÅ‡∏£‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà (‡πÅ‡∏£‡∏á‡πÇ‡∏ô‡πâ‡∏°‡∏ñ‡πà‡∏ß‡∏á, ‡πÅ‡∏£‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏î‡∏ó‡∏≤‡∏ô) üåü", "ai"),
            ("6Ô∏è‚É£", "‡∏Ñ‡∏•‡∏∑‡πà‡∏ô (‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á, ‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÅ‡∏™‡∏á) üåü", "ai"),
        ],
        "‡∏õ.6": [
            ("1Ô∏è‚É£", "‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡πà‡∏≠‡∏°‡πÑ‡∏£‡πâ‡∏ó‡πà‡∏≠ (‡∏Æ‡∏≠‡∏£‡πå‡πÇ‡∏°‡∏ô, ‡∏ï‡πà‡∏≠‡∏°‡πÑ‡∏£‡πâ‡∏ó‡πà‡∏≠‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç) üåü", "ai"),
            ("2Ô∏è‚É£", "‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô (‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏ó‡∏≤‡∏á‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡∏Å‡∏£‡∏£‡∏°, ‡∏Å‡∏≤‡∏£‡∏ñ‡πà‡∏≤‡∏¢‡∏ó‡∏≠‡∏î‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞) üåü", "ai"),
            ("3Ô∏è‚É£", "‡∏ß‡∏¥‡∏ß‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏≤‡∏£ (‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï) üåü", "ai"),
            ("4Ô∏è‚É£", "‡∏™‡∏™‡∏≤‡∏£‡πÅ‡∏•‡∏∞‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô (‡∏Å‡∏é‡∏ó‡∏£‡∏á‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô, ‡∏Å‡∏≤‡∏£‡∏ñ‡πà‡∏≤‡∏¢‡πÇ‡∏≠‡∏ô‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô) üåü", "ai"),
            ("5Ô∏è‚É£", "‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡∏£‡∏¥‡∏¢‡∏∞ (‡∏î‡∏≤‡∏ß‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå, ‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô-‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô) üåü", "ai"),
            ("6Ô∏è‚É£", "‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° (‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥, ‡∏Å‡∏≤‡∏£‡∏≠‡∏ô‡∏∏‡∏£‡∏±‡∏Å‡∏©‡πå) üåü", "ai"),
        ],
        
        # ===== ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡∏≠‡∏ô‡∏ï‡πâ‡∏ô =====
        "‡∏°.1": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "‡∏™‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πå üåü", "ai"),
                ("2Ô∏è‚É£", "‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏™‡∏¥‡πà‡∏á‡∏°‡∏µ‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï üåü", "ai"),
                ("3Ô∏è‚É£", "‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡∏£‡∏á‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏Ç‡∏≠‡∏á‡∏û‡∏∑‡∏ä üåü", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡πâ‡∏≠‡∏ô üåü", "ai"),
                ("2Ô∏è‚É£", "‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏•‡∏°‡∏ü‡πâ‡∏≤‡∏≠‡∏≤‡∏Å‡∏≤‡∏® üåü", "ai"),
            ]
        },
        "‡∏°.2": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "‡∏™‡∏≤‡∏£‡∏•‡∏∞‡∏•‡∏≤‡∏¢ üåü", "ai"),
                ("2Ô∏è‚É£", "‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡πå üåü", "ai"),
                ("3Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÅ‡∏£‡∏á üåü", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô üåü", "ai"),
                ("2Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏™‡∏≤‡∏£ üåü", "ai"),
                ("3Ô∏è‚É£", "‡πÇ‡∏•‡∏Å‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á üåü", "ai"),
            ]
        },
        "‡∏°.3": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå üåü", "ai"),
                ("2Ô∏è‚É£", "‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏á üåü", "ai"),
                ("3Ô∏è‚É£", "‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏∏‡∏£‡∏¥‡∏¢‡∏∞‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ üåü", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "‡∏õ‡∏è‡∏¥‡∏Å‡∏¥‡∏£‡∏¥‡∏¢‡∏≤‡πÄ‡∏Ñ‡∏°‡∏µ‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏™‡∏î‡∏∏‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô üåü", "ai"),
                ("2Ô∏è‚É£", "‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ üåü", "ai"),
                ("3Ô∏è‚É£", "‡∏£‡∏∞‡∏ö‡∏ö‡∏ô‡∏¥‡πÄ‡∏ß‡∏®‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á‡∏ä‡∏µ‡∏ß‡∏†‡∏≤‡∏û üåü", "ai"),
            ]
        },
    }
    
    # Grade Selection
    science_grade_options = ["‡∏õ.1", "‡∏õ.2", "‡∏õ.3", "‡∏õ.4", "‡∏õ.5", "‡∏õ.6", "‡∏°.1", "‡∏°.2", "‡∏°.3", "‡∏°.4", "‡∏°.5", "‡∏°.6"]
    science_grade = st.selectbox("üìö ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô:", science_grade_options)
    
    # ‡∏°.4-6 Subject Selector (‡πÄ‡∏Ñ‡∏°‡∏µ ‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå ‡∏ä‡∏µ‡∏ß‡∏∞)
    if science_grade in ["‡∏°.4", "‡∏°.5", "‡∏°.6"]:
        subject_options = ["‡πÄ‡∏Ñ‡∏°‡∏µ (Chemistry)", "‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå (Physics)", "‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤ (Biology)"]
        science_subject = st.selectbox("üß™ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ä‡∏≤:", subject_options)
        
        # Get subject key
        subject_key = science_subject.split(" (")[0]  # "‡πÄ‡∏Ñ‡∏°‡∏µ", "‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå", or "‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤"
    
    # Check if grade is ‡∏°.1-3 (has terms) or ‡∏°.4-6 (has subjects)
    if science_grade in ["‡∏°.1", "‡∏°.2", "‡∏°.3"]:
        # Select term first
        science_term_options = list(science_topics[science_grade].keys())
        science_term = st.selectbox("üìÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ó‡∏≠‡∏°:", science_term_options)
        science_topics_list = science_topics[science_grade][science_term]
        selected_grade_level = science_grade
    elif science_grade in ["‡∏°.4", "‡∏°.5", "‡∏°.6"]:
        # ‡∏°.4-6: Select term first
        science_term_options = ["‡πÄ‡∏ó‡∏≠‡∏° 1", "‡πÄ‡∏ó‡∏≠‡∏° 2"]
        science_term = st.selectbox("üìÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ó‡∏≠‡∏°:", science_term_options)
        
        # Get topics based on subject and grade
        science_topics_list = []
        
        # ===== ‡πÄ‡∏Ñ‡∏°‡∏µ (Chemistry) ‡∏°.4-6 =====
        if subject_key == "‡πÄ‡∏Ñ‡∏°‡∏µ":
            if science_grade == "‡∏°.4":
                science_topics_list = [
                    ("1Ô∏è‚É£", "‡∏≠‡∏∞‡∏ï‡∏≠‡∏°‡πÅ‡∏•‡∏∞‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏ò‡∏≤‡∏ï‡∏∏ üåü", "ai"),
                    ("2Ô∏è‚É£", "‡∏û‡∏±‡∏ô‡∏ò‡∏∞‡πÄ‡∏Ñ‡∏°‡∏µ üåü", "ai"),
                    ("3Ô∏è‚É£", "‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡πÉ‡∏ô‡∏õ‡∏è‡∏¥‡∏Å‡∏¥‡∏£‡∏¥‡∏¢‡∏≤‡πÄ‡∏Ñ‡∏°‡∏µ üåü", "ai"),
                ]
            elif science_grade == "‡∏°.5":
                science_topics_list = [
                    ("1Ô∏è‚É£", "‡∏™‡∏°‡∏ö‡∏±‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏Å‡πä‡∏≤‡∏ã‡πÅ‡∏•‡∏∞‡∏™‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏°‡∏µ üåü", "ai"),
                    ("2Ô∏è‚É£", "‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏è‡∏¥‡∏Å‡∏¥‡∏£‡∏¥‡∏¢‡∏≤‡πÄ‡∏Ñ‡∏°‡∏µ üåü", "ai"),
                    ("3Ô∏è‚É£", "‡∏™‡∏°‡∏î‡∏∏‡∏•‡πÄ‡∏Ñ‡∏°‡∏µ üåü", "ai"),
                    ("4Ô∏è‚É£", "‡∏Å‡∏£‡∏î-‡πÄ‡∏ö‡∏™ üåü", "ai"),
                ]
            elif science_grade == "‡∏°.6":
                science_topics_list = [
                    ("1Ô∏è‚É£", "‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡πÄ‡∏Ñ‡∏°‡∏µ üåü", "ai"),
                    ("2Ô∏è‚É£", "‡∏ò‡∏≤‡∏ï‡∏∏‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏£‡∏ä‡∏µ‡∏ß‡πÇ‡∏°‡πÄ‡∏•‡∏Å‡∏∏‡∏• üåü", "ai"),
                    ("3Ô∏è‚É£", "‡πÄ‡∏Ñ‡∏°‡∏µ‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå üåü", "ai"),
                ]
        
        # ===== ‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå (Physics) ‡∏°.4-6 =====
        elif subject_key == "‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå":
            if science_grade == "‡∏°.4":
                science_topics_list = [
                    ("1Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ô‡∏ß‡∏ï‡∏£‡∏á üåü", "ai"),
                    ("2Ô∏è‚É£", "‡πÅ‡∏£‡∏á‡πÅ‡∏•‡∏∞‡∏Å‡∏é‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà üåü", "ai"),
                    ("3Ô∏è‚É£", "‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô üåü", "ai"),
                    ("4Ô∏è‚É£", "‡πÇ‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡∏±‡∏°‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ä‡∏ô üåü", "ai"),
                ]
            elif science_grade == "‡∏°.5":
                science_topics_list = [
                    ("1Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡πà‡∏≤‡∏á‡πÜ (‡∏ß‡∏á‡∏Å‡∏•‡∏°, ‡πÇ‡∏Ñ‡πâ‡∏á, ‡∏™‡∏±‡πà‡∏ô) üåü", "ai"),
                    ("2Ô∏è‚É£", "‡πÅ‡∏£‡∏á‡πÉ‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥ üåü", "ai"),
                    ("3Ô∏è‚É£", "‡∏Ñ‡∏•‡∏∑‡πà‡∏ô üåü", "ai"),
                    ("4Ô∏è‚É£", "‡πÄ‡∏™‡∏µ‡∏¢‡∏á üåü", "ai"),
                    ("5Ô∏è‚É£", "‡πÅ‡∏™‡∏á üåü", "ai"),
                ]
            elif science_grade == "‡∏°.6":
                science_topics_list = [
                    ("1Ô∏è‚É£", "‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏™‡∏ñ‡∏¥‡∏ï‡πÅ‡∏•‡∏∞‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏Å‡∏£‡∏∞‡πÅ‡∏™ üåü", "ai"),
                    ("2Ô∏è‚É£", "‡πÅ‡∏°‡πà‡πÄ‡∏´‡∏•‡πá‡∏Å‡πÑ‡∏ü‡∏ü‡πâ‡∏≤ üåü", "ai"),
                    ("3Ô∏è‚É£", "‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå‡∏≠‡∏∞‡∏ï‡∏≠‡∏° üåü", "ai"),
                    ("4Ô∏è‚É£", "‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå‡∏ô‡∏¥‡∏ß‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå üåü", "ai"),
                ]
        
        # ===== ‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤ (Biology) ‡∏°.4-6 =====
        elif subject_key == "‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤":
            if science_grade == "‡∏°.4":
                science_topics_list = [
                    ("1Ô∏è‚É£", "‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡πà‡∏≠‡∏¢‡∏≠‡∏≤‡∏´‡∏≤‡∏£ üåü", "ai"),
                    ("2Ô∏è‚É£", "‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏≤‡∏¢‡πÉ‡∏à üåü", "ai"),
                    ("3Ô∏è‚É£", "‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏°‡∏∏‡∏ô‡πÄ‡∏ß‡∏µ‡∏¢‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏î üåü", "ai"),
                    ("4Ô∏è‚É£", "‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏±‡∏ö‡∏ñ‡πà‡∏≤‡∏¢ üåü", "ai"),
                    ("5Ô∏è‚É£", "‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡∏™‡∏≤‡∏ó üåü", "ai"),
                    ("6Ô∏è‚É£", "‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡πà‡∏≠‡∏°‡πÑ‡∏£‡πâ‡∏ó‡πà‡∏≠ üåü", "ai"),
                ]
            elif science_grade == "‡∏°.5":
                science_topics_list = [
                    ("1Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ñ‡πà‡∏≤‡∏¢‡∏ó‡∏≠‡∏î‡∏™‡∏≤‡∏£‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏£‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏¢ üåü", "ai"),
                    ("2Ô∏è‚É£", "‡∏£‡∏∞‡∏ö‡∏ö‡∏†‡∏π‡∏°‡∏¥‡∏Ñ‡∏∏‡πâ‡∏°‡∏Å‡∏±‡∏ô üåü", "ai"),
                    ("3Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡∏ö‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡πå‡πÅ‡∏•‡∏∞‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏≤‡∏£ üåü", "ai"),
                    ("4Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ñ‡πà‡∏≤‡∏¢‡∏ó‡∏≠‡∏î‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞‡∏ó‡∏≤‡∏á‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡∏Å‡∏£‡∏£‡∏° üåü", "ai"),
                ]
            elif science_grade == "‡∏°.6":
                science_topics_list = [
                    ("1Ô∏è‚É£", "‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå üåü", "ai"),
                    ("2Ô∏è‚É£", "‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡∏Å‡∏£‡∏£‡∏°‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ üåü", "ai"),
                    ("3Ô∏è‚É£", "‡∏ß‡∏¥‡∏ß‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏≤‡∏£ üåü", "ai"),
                    ("4Ô∏è‚É£", "‡∏ô‡∏¥‡πÄ‡∏ß‡∏®‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤ üåü", "ai"),
                    ("5Ô∏è‚É£", "‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏° üåü", "ai"),
                ]
        
        selected_grade_level = f"{science_grade} {subject_key}"
    else:
        # Primary school grades
        science_topics_list = science_topics.get(science_grade, [])
        selected_grade_level = science_grade
    
    # Topic selection with display names
    science_topic_options = [f"{prefix} {name}" for prefix, name, _ in science_topics_list]
    science_topic_select = st.selectbox("üìñ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠:", science_topic_options)
    
    # Get selected topic details
    selected_science_topic = None
    for prefix, name, topic_type in science_topics_list:
        full_name = f"{prefix} {name}"
        if full_name == science_topic_select:
            # Remove üåü for backend
            clean_name = name.replace(" üåü", "")
            selected_science_topic = clean_name
            selected_science_type = topic_type
            break
    
        st.info("üìå ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ AI ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏Ñ‡πà‡∏∞")
    st.markdown("‚ÑπÔ∏è **‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:** ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÉ‡∏ä‡πâ AI ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÅ‡∏•‡∏∞‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢")
    
    num_q = st.slider("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠", 10, 50, 20)
    
    if st.button("üöÄ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå", type="primary"):
        if not st.session_state.api_key:
            st.info("üîë ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ API Key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏Ñ‡πà‡∏∞ ‡∏Å‡∏£‡∏≠‡∏Å API Key ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏∞")
        else:
            with st.spinner("ü§ñ AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå..."):
                # Grade context for AI
                grade_context = {
                    "‡∏õ.1": "Grade 1 (Thailand IPST Science Curriculum)",
                    "‡∏õ.2": "Grade 2 (Thailand IPST Science Curriculum)",
                    "‡∏õ.3": "Grade 3 (Thailand IPST Science Curriculum)",
                    "‡∏õ.4": "Grade 4 (Thailand IPST Science Curriculum)",
                    "‡∏õ.5": "Grade 5 (Thailand IPST Science Curriculum)",
                    "‡∏õ.6": "Grade 6 (Thailand IPST Science Curriculum)",
                    "‡∏°.1": "Grade 7 / Matthayom 1 (Thailand IPST Science Curriculum)",
                    "‡∏°.2": "Grade 8 / Matthayom 2 (Thailand IPST Science Curriculum)",
                    "‡∏°.3": "Grade 9 / Matthayom 3 (Thailand IPST Science Curriculum)",
                }
                
                # Use specific generator functions for ‡∏°.4-6 subjects
                if science_grade in ["‡∏°.4", "‡∏°.5", "‡∏°.6"]:
                    if subject_key == "‡πÄ‡∏Ñ‡∏°‡∏µ":
                        questions, answers = generator.generate_chemistry_worksheet(
                            selected_science_topic, 
                            science_grade,
                            num_q
                        )
                    elif subject_key == "‡∏ü‡∏¥‡∏™‡∏¥‡∏Å‡∏™‡πå":
                        questions, answers = generator.generate_physics_worksheet(
                            selected_science_topic, 
                            science_grade,
                            num_q
                        )
                    elif subject_key == "‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤":
                        questions, answers = generator.generate_biology_worksheet(
                            selected_science_topic, 
                            science_grade,
                            num_q
                        )
                    else:
                        questions, answers = generator.generate_science_worksheet(
                            selected_science_topic, 
                            selected_grade_level,
                            num_q
                        )
                else:
                    questions, answers = generator.generate_science_worksheet(
                        selected_science_topic, 
                        grade_context.get(science_grade, science_grade),
                        num_q
                    )
                
                pdf = generator.create_pdf(title, school_name, selected_science_topic, questions, answers, qr_url, uploaded_logo)
                word = generator.create_word_doc(title, school_name, selected_science_topic, questions, answers)
                
                st.session_state.generated_pdf = pdf
                st.session_state.generated_word = word
                st.session_state.generated_filename = "science_worksheet"
    
    # Show download buttons if content is generated
    if st.session_state.generated_pdf is not None and st.session_state.get("generated_filename") == "science_worksheet":
        st.success("‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á")
        c1, c2 = st.columns(2)
        c1.download_button("üìÑ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î PDF", st.session_state.generated_pdf, f"{st.session_state.generated_filename}.pdf", "application/pdf")
        c2.download_button("üìù ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Word", st.session_state.generated_word, f"{st.session_state.generated_filename}.docx", "application/vnd.openxmlformats-officedocument.wordprocessingml.document")
        
        if st.button("üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà"):
            st.session_state.generated_pdf = None
            st.session_state.generated_word = None
            st.rerun()

elif "‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢" in mode_select:
    st.subheader("üìö ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ (‡∏ï‡∏≤‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏™‡∏π‡∏ï‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏£‡∏ß‡∏á‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ò‡∏¥‡∏Å‡∏≤‡∏£)")
    
    # Thai Language Curriculum Data
    thai_topics = {
        # ===== ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤ =====
        "‡∏õ.1": [
            ("1Ô∏è‚É£", "‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÑ‡∏ó‡∏¢ (‡∏û‡∏¢‡∏±‡∏ç‡∏ä‡∏ô‡∏∞‡πÑ‡∏ó‡∏¢ 44 ‡∏ï‡∏±‡∏ß, ‡∏™‡∏£‡∏∞ 32 ‡∏£‡∏π‡∏õ)", "ai"),
            ("2Ô∏è‚É£", "‡∏™‡∏£‡∏∞‡πÉ‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ (‡∏™‡∏£‡∏∞‡πÄ‡∏î‡∏µ‡πà‡∏¢‡∏ß, ‡∏™‡∏£‡∏∞‡∏õ‡∏£‡∏∞‡∏™‡∏°)", "ai"),
            ("3Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á (‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏≤‡∏ö‡∏ß‡∏£‡∏£‡∏ì‡∏¢‡∏∏‡∏Å‡∏ï‡πå)", "ai"),
            ("4Ô∏è‚É£", "‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô (‡∏Ñ‡∏≥‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á, ‡∏Ñ‡∏≥‡∏™‡∏±‡∏ï‡∏ß‡πå, ‡∏Ñ‡∏≥‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß)", "ai"),
            ("5Ô∏è‚É£", "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏±‡πâ‡∏ô (‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏™‡∏±‡πâ‡∏ô, ‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏™‡∏±‡πâ‡∏ô)", "ai"),
        ],
        "‡∏õ.2": [
            ("1Ô∏è‚É£", "‡∏Ñ‡∏≥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ (‡∏Ñ‡∏≥‡∏ã‡πâ‡∏≥, ‡∏Ñ‡∏≥‡∏ï‡∏£‡∏á‡∏Ç‡πâ‡∏≤‡∏°, ‡∏Ñ‡∏≥‡∏û‡πâ‡∏≠‡∏á)", "ai"),
            ("2Ô∏è‚É£", "‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏™‡∏£‡∏£‡∏û‡∏ô‡∏≤‡∏° (‡∏™‡∏£‡∏£‡∏û‡∏ô‡∏≤‡∏°, ‡∏Ñ‡∏≥‡∏™‡∏£‡∏£‡∏û‡∏ô‡∏≤‡∏°‡∏™‡∏£‡∏£‡∏û‡∏ö‡∏∏‡∏£‡∏ì)", "ai"),
            ("3Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô (‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡∏ö‡∏≠‡∏Å, ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ)", "ai"),
            ("4Ô∏è‚É£", "‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô (‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏ä‡∏≤‡∏î‡∏Å, ‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏ó‡∏¢)", "ai"),
            ("5Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏à‡∏±‡∏ö‡πÉ‡∏à‡∏Ñ‡∏ß‡∏≤‡∏° (‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏™‡∏±‡πâ‡∏ô, ‡∏ï‡∏≠‡∏ö‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°)", "ai"),
        ],
        "‡∏õ.3": [
            ("1Ô∏è‚É£", "‡∏ä‡∏ô‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥ (‡∏Ñ‡∏≥‡∏ô‡∏≤‡∏°, ‡∏Ñ‡∏≥‡∏Å‡∏£‡∏¥‡∏¢‡∏≤, ‡∏Ñ‡∏≥‡∏Ñ‡∏∏‡∏ì‡∏®‡∏±‡∏û‡∏ó‡πå)", "ai"),
            ("2Ô∏è‚É£", "‡∏Å‡∏•‡∏≠‡∏ô‡πÅ‡∏õ‡∏î (‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡∏≠‡∏ô‡πÅ‡∏õ‡∏î, ‡∏Ñ‡∏≥‡∏Ñ‡∏£‡∏∏-‡∏•‡∏´‡∏∏)", "ai"),
            ("3Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Ñ‡∏ß‡∏≤‡∏° (‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡πâ‡∏ô)", "ai"),
            ("4Ô∏è‚É£", "‡∏Ñ‡∏≥‡∏£‡∏≤‡∏ä‡∏≤‡∏®‡∏±‡∏û‡∏ó‡πå‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô (‡∏Ñ‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô-‡∏•‡∏á‡∏ó‡πâ‡∏≤‡∏¢)", "ai"),
            ("5Ô∏è‚É£", "‡∏ß‡∏£‡∏£‡∏ì‡∏Ñ‡∏î‡∏µ‡πÑ‡∏ó‡∏¢ (‡∏Ç‡∏∏‡∏ô‡∏ä‡πâ‡∏≤‡∏á‡∏Ç‡∏∏‡∏ô‡πÅ‡∏ú‡∏ô, ‡∏™‡∏∏‡∏†‡∏≤‡∏©‡∏¥‡∏ï‡πÑ‡∏ó‡∏¢)", "ai"),
        ],
        "‡∏õ.4": [
            ("1Ô∏è‚É£", "‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏≥‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ (‡∏Ñ‡∏≥‡∏†‡∏≤‡∏©‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®, ‡∏Ñ‡∏≥‡∏¢‡∏∑‡∏°)", "ai"),
            ("2Ô∏è‚É£", "‡∏ä‡∏ô‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏≥ (‡∏Ñ‡∏≥‡∏™‡∏£‡∏£‡∏û‡∏ô‡∏≤‡∏°, ‡∏Ñ‡∏≥‡∏™‡∏±‡∏ô‡∏ò‡∏≤‡∏ô, ‡∏Ñ‡∏≥‡∏ö‡∏∏‡∏û‡∏ö‡∏ó)", "ai"),
            ("3Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏ï‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏° (‡∏≠‡πà‡∏≤‡∏ô‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°, ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πà‡∏≤‡∏ß)", "ai"),
            ("4Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢ (‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì, ‡∏à‡∏î‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏ä‡∏¥‡∏ç)", "ai"),
            ("5Ô∏è‚É£", "‡∏Å‡∏•‡∏≠‡∏ô‡∏™‡∏∏‡∏†‡∏≤‡∏û (‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡∏≠‡∏ô‡∏™‡∏∏‡∏†‡∏≤‡∏û)", "ai"),
        ],
        "‡∏õ.5": [
            ("1Ô∏è‚É£", "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡πÅ‡∏•‡∏∞‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö (‡∏≠‡∏á‡∏Ñ‡πå‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ, ‡∏ä‡∏ô‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ)", "ai"),
            ("2Ô∏è‚É£", "‡∏ß‡∏•‡∏µ‡πÅ‡∏•‡∏∞‡∏≠‡∏ô‡∏∏‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ (‡∏ß‡∏•‡∏µ‡∏ô‡∏≤‡∏°, ‡∏ß‡∏•‡∏µ‡∏Å‡∏£‡∏¥‡∏¢‡∏≤)", "ai"),
            ("3Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤, ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Ç‡πà‡∏≤‡∏ß)", "ai"),
            ("4Ô∏è‚É£", "‡∏ß‡∏£‡∏£‡∏ì‡∏Ñ‡∏î‡∏µ‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡∏†‡∏≤‡∏û (‡∏Å‡∏≤‡∏û‡∏¢‡πå‡∏Å‡∏•‡∏≠‡∏ô‡∏ö‡∏ó‡∏£‡πâ‡∏≠‡∏¢‡∏Å‡∏£‡∏≠‡∏á)", "ai"),
            ("5Ô∏è‚É£", "‡∏†‡∏≤‡∏©‡∏≤‡∏ñ‡∏¥‡πà‡∏ô (‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏µ‡∏™‡∏≤‡∏ô, ‡∏†‡∏≤‡∏©‡∏≤‡πÄ‡∏´‡∏ô‡∏∑‡∏≠, ‡∏†‡∏≤‡∏©‡∏≤‡πÉ‡∏ï‡πâ)", "ai"),
        ],
        "‡∏õ.6": [
            ("1Ô∏è‚É£", "‡∏´‡∏•‡∏±‡∏Å‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥ (‡∏Ñ‡∏≥‡∏£‡∏≤‡∏ä‡∏≤‡∏®‡∏±‡∏û‡∏ó‡πå, ‡∏Ñ‡∏≥‡∏™‡∏∏‡∏†‡∏≤‡∏û)", "ai"),
            ("2Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå (‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°, ‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏™‡∏±‡πâ‡∏ô)", "ai"),
            ("3Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå (‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á, ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πà‡∏≤‡∏ß)", "ai"),
            ("4Ô∏è‚É£", "‡∏ß‡∏£‡∏£‡∏ì‡∏Ñ‡∏î‡∏µ‡∏ß‡∏£‡∏£‡∏ì‡∏Å‡∏£‡∏£‡∏° (‡∏ß‡∏£‡∏£‡∏ì‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏≤‡∏ï‡∏¥)", "ai"),
            ("5Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠ (‡∏Å‡∏≤‡∏£‡∏û‡∏π‡∏î, ‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)", "ai"),
        ],
        
        # ===== ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡∏≠‡∏ô‡∏ï‡πâ‡∏ô =====
        "‡∏°.1": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏≥‡∏™‡∏£‡∏£‡∏û‡∏ô‡∏≤‡∏° (‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏™‡∏£‡∏£‡∏û‡∏ô‡∏≤‡∏°‡πÉ‡∏ô‡∏ö‡∏£‡∏¥‡∏ö‡∏ó‡∏ï‡πà‡∏≤‡∏á‡πÜ)", "ai"),
                ("2Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏π‡∏õ‡∏Ñ‡∏≥ (‡∏Å‡∏≤‡∏£‡∏ú‡∏±‡∏ô‡∏Ñ‡∏≥‡∏Å‡∏£‡∏¥‡∏¢‡∏≤, ‡∏Å‡∏≤‡∏£‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏Ñ‡∏≥)", "ai"),
                ("3Ô∏è‚É£", "‡∏ß‡∏•‡∏µ‡πÅ‡∏•‡∏∞‡∏≠‡∏ô‡∏∏‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ (‡∏ß‡∏•‡∏µ‡∏Ç‡∏¢‡∏≤‡∏¢, ‡∏≠‡∏ô‡∏∏‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ)", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "‡∏ß‡∏£‡∏£‡∏ì‡∏Ñ‡∏î‡∏µ (‡∏£‡πâ‡∏≠‡∏¢‡∏Å‡∏£‡∏≠‡∏á‡πÑ‡∏ó‡∏¢, ‡∏Å‡∏≤‡∏û‡∏¢‡πå‡∏¢‡∏≤‡∏ô‡πÄ‡∏≠‡∏Å)", "ai"),
                ("2Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô-‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô (‡∏≠‡πà‡∏≤‡∏ô‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°, ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°)", "ai"),
            ]
        },
        "‡∏°.2": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "‡∏Ñ‡∏≥‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ã‡πâ‡∏≠‡∏ô (‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ã‡πâ‡∏≠‡∏ô, ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ã‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏ö)", "ai"),
                ("2Ô∏è‚É£", "‡∏Å‡∏•‡∏≠‡∏ô‡πÅ‡∏õ‡∏î-‡∏Å‡∏•‡∏≠‡∏ô‡∏™‡∏∏‡∏†‡∏≤‡∏û (‡∏Å‡∏≤‡∏£‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏•‡∏≠‡∏ô, ‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏Å‡∏•‡∏≠‡∏ô)", "ai"),
                ("3Ô∏è‚É£", "‡∏ß‡∏£‡∏£‡∏ì‡∏Ñ‡∏î‡∏µ‡∏≠‡∏µ‡∏™‡∏≤‡∏ô (‡∏•‡∏¥‡πÄ‡∏Å, ‡πÇ‡∏Ç‡∏ô, ‡∏´‡∏ô‡∏±‡∏á‡πÉ‡∏´‡∏ç‡πà)", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå (‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ô‡∏¥‡∏¢‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô, ‡∏ö‡∏ó‡∏•‡∏∞‡∏Ñ‡∏£)", "ai"),
                ("2Ô∏è‚É£", "‡∏†‡∏≤‡∏©‡∏≤‡∏ñ‡∏¥‡πà‡∏ô‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏©‡∏≤‡∏Å‡∏•‡∏≤‡∏á (‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á, ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ)", "ai"),
            ]
        },
        "‡∏°.3": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "‡∏†‡∏≤‡∏©‡∏≤‡∏Å‡∏±‡∏ö‡∏™‡∏±‡∏á‡∏Ñ‡∏° (‡∏†‡∏≤‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏≠‡∏≥‡∏ô‡∏≤‡∏à, ‡∏†‡∏≤‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏®‡∏™‡∏†‡∏≤‡∏û)", "ai"),
                ("2Ô∏è‚É£", "‡∏ß‡∏£‡∏£‡∏ì‡∏Ñ‡∏î‡∏µ‡πÑ‡∏ó‡∏¢ (‡∏ô‡∏¥‡∏ó‡∏≤‡∏ô‡∏£‡∏≤‡∏°‡πÄ‡∏Å‡∏µ‡∏¢‡∏£‡∏ï‡∏¥‡πå, ‡∏Ç‡∏∏‡∏ô‡∏ä‡πâ‡∏≤‡∏á‡∏Ç‡∏∏‡∏ô‡πÅ‡∏ú‡∏ô)", "ai"),
                ("3Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô‡∏ß‡∏¥‡∏û‡∏≤‡∏Å‡∏©‡πå (‡∏ß‡∏¥‡∏û‡∏≤‡∏Å‡∏©‡πå‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°, ‡∏ß‡∏¥‡∏û‡∏≤‡∏Å‡∏©‡πå‡∏Ç‡πà‡∏≤‡∏ß)", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£ (‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡∏à‡∏±‡∏¢, ‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£)", "ai"),
                ("2Ô∏è‚É£", "‡∏ß‡∏≤‡∏ó‡∏µ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤ (‡∏Å‡∏≤‡∏£‡πÇ‡∏ï‡πâ‡πÅ‡∏¢‡πâ‡∏á, ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠)", "ai"),
            ]
        },
        
        # ===== ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡∏≠‡∏ô‡∏õ‡∏•‡∏≤‡∏¢ =====
        "‡∏°.4": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "‡∏†‡∏≤‡∏©‡∏≤‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£ (‡∏†‡∏≤‡∏©‡∏≤‡πÉ‡∏ô‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£, ‡∏†‡∏≤‡∏©‡∏≤‡∏ò‡∏∏‡∏£‡∏Å‡∏¥‡∏à)", "ai"),
                ("2Ô∏è‚É£", "‡∏´‡∏•‡∏±‡∏Å‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢ (‡∏ó‡∏§‡∏©‡∏é‡∏µ‡∏†‡∏≤‡∏©‡∏≤, ‡∏†‡∏≤‡∏©‡∏≤‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î)", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "‡∏ß‡∏£‡∏£‡∏ì‡∏Ñ‡∏î‡∏µ‡∏£‡πà‡∏ß‡∏°‡∏™‡∏°‡∏±‡∏¢ (‡∏ô‡∏¥‡∏¢‡∏≤‡∏¢‡πÑ‡∏ó‡∏¢‡∏£‡πà‡∏ß‡∏°‡∏™‡∏°‡∏±‡∏¢)", "ai"),
                ("2Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏ä‡∏¥‡∏á‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£ (‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå)", "ai"),
                ("3Ô∏è‚É£", "‡∏™‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏©‡∏≤ (‡∏†‡∏≤‡∏©‡∏≤‡πÇ‡∏Ü‡∏©‡∏ì‡∏≤, ‡∏†‡∏≤‡∏©‡∏≤‡∏™‡∏∑‡πà‡∏≠)", "ai"),
            ]
        },
        "‡∏°.5": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "‡∏ß‡∏£‡∏£‡∏ì‡∏Ñ‡∏î‡∏µ‡πÑ‡∏ó‡∏¢‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô (‡∏ß‡∏£‡∏£‡∏ì‡∏Ñ‡∏î‡∏µ‡∏≠‡∏≤‡πÄ‡∏ã‡∏µ‡∏¢‡∏ô)", "ai"),
                ("2Ô∏è‚É£", "‡∏†‡∏≤‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏° (‡∏†‡∏≤‡∏©‡∏≤‡∏Å‡∏±‡∏ö‡∏ß‡∏±‡∏í‡∏ô‡∏ò‡∏£‡∏£‡∏°‡πÑ‡∏ó‡∏¢)", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏ô‡∏≥‡πÄ‡∏™‡∏ô‡∏≠ (‡∏Å‡∏≤‡∏£‡∏û‡∏π‡∏î‡πÉ‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≤‡∏ò‡∏≤‡∏£‡∏ì‡∏∞)", "ai"),
                ("2Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏£‡∏Ñ‡πå (‡∏ö‡∏ó‡∏•‡∏∞‡∏Ñ‡∏£, ‡∏ö‡∏ó‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå)", "ai"),
                ("3Ô∏è‚É£", "‡∏ß‡∏≤‡∏ó‡∏µ‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤ (‡∏Å‡∏≤‡∏£‡πÇ‡∏ï‡πâ‡∏ß‡∏≤‡∏ó‡∏µ, ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ç‡πâ‡∏≠‡πÄ‡∏™‡∏ô‡∏≠)", "ai"),
            ]
        },
        "‡∏°.6": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "‡∏†‡∏≤‡∏©‡∏≤‡∏Å‡∏±‡∏ö‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ (‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏¥‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡πÄ‡∏ô‡πá‡∏ï, ‡∏†‡∏≤‡∏©‡∏≤‡πÇ‡∏ã‡πÄ‡∏ä‡∏µ‡∏¢‡∏•)", "ai"),
                ("2Ô∏è‚É£", "‡∏†‡∏≤‡∏©‡∏≤‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏ä‡∏µ‡∏û (‡∏†‡∏≤‡∏©‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏ä‡∏µ‡∏û‡∏ï‡πà‡∏≤‡∏á‡πÜ)", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "‡∏ß‡∏£‡∏£‡∏ì‡∏Ñ‡∏î‡∏µ‡πÅ‡∏•‡∏∞‡∏†‡∏≤‡∏û‡∏¢‡∏ô‡∏ï‡∏£‡πå (‡∏Å‡∏≤‡∏£‡∏î‡∏±‡∏î‡πÅ‡∏õ‡∏•‡∏á‡∏ß‡∏£‡∏£‡∏ì‡∏Ñ‡∏î‡∏µ)", "ai"),
                ("2Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£ (‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≤‡∏£‡∏Ñ‡∏î‡∏µ)", "ai"),
                ("3Ô∏è‚É£", "‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏•‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏©‡∏≤ (‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏à‡∏≤‡∏£‡∏ì‡πå, ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô)", "ai"),
            ]
        },
    }
    
    # Grade Selection
    thai_grade_options = ["‡∏õ.1", "‡∏õ.2", "‡∏õ.3", "‡∏õ.4", "‡∏õ.5", "‡∏õ.6", "‡∏°.1", "‡∏°.2", "‡∏°.3", "‡∏°.4", "‡∏°.5", "‡∏°.6"]
    thai_grade_select = st.selectbox("üìö ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô:", thai_grade_options)
    
    # Check if grade is ‡∏°.1-6 (has terms)
    if thai_grade_select in ["‡∏°.1", "‡∏°.2", "‡∏°.3", "‡∏°.4", "‡∏°.5", "‡∏°.6"]:
        # Select term first
        thai_term_options = list(thai_topics[thai_grade_select].keys())
        thai_term_select = st.selectbox("üìÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ó‡∏≠‡∏°:", thai_term_options)
        thai_topics_list = thai_topics[thai_grade_select][thai_term_select]
        selected_thai_grade = thai_grade_select
    else:
        # Primary school grades
        thai_topics_list = thai_topics.get(thai_grade_select, [])
        selected_thai_grade = thai_grade_select
    
    # Topic selection with display names
    thai_topic_options = [f"{prefix} {name}" for prefix, name, _ in thai_topics_list]
    thai_topic_select = st.selectbox("üìñ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠:", thai_topic_options)
    
    # Get selected topic details
    selected_thai_topic = None
    for prefix, name, topic_type in thai_topics_list:
        full_name = f"{prefix} {name}"
        if full_name == thai_topic_select:
            selected_thai_topic = name
            break
    
        st.info("üìå ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ AI ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏Ñ‡πà‡∏∞")
    
    # Exercise type selector
    exercise_types = [
        "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ú‡∏™‡∏°‡∏ú‡∏™‡∏≤‡∏ô)",
        "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô (Writing Exercises)",
        "‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô (Reading Comprehension)",
        "‡∏´‡∏•‡∏±‡∏Å‡∏†‡∏≤‡∏©‡∏≤ (Grammar Exercises)",
        "‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå (Vocabulary)",
        "‡∏ß‡∏£‡∏£‡∏ì‡∏Ñ‡∏î‡∏µ (Literature)"
    ]
    exercise_type = st.selectbox("üìù ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î:", exercise_types)
    
    num_q = st.slider("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠", 10, 50, 20)
    
    if st.button("üöÄ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢", type="primary"):
        if not st.session_state.api_key:
            st.info("üîë ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ API Key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏Ñ‡πà‡∏∞ ‡∏Å‡∏£‡∏≠‡∏Å API Key ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏∞")
        else:
            with st.spinner("ü§ñ AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢..."):
                # Map exercise type to prompt
                exercise_mapping = {
                    "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ú‡∏™‡∏°‡∏ú‡∏™‡∏≤‡∏ô)": "mix",
                    "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô (Writing Exercises)": "writing",
                    "‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô (Reading Comprehension)": "reading",
                    "‡∏´‡∏•‡∏±‡∏Å‡∏†‡∏≤‡∏©‡∏≤ (Grammar Exercises)": "grammar",
                    "‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå (Vocabulary)": "vocabulary",
                    "‡∏ß‡∏£‡∏£‡∏ì‡∏Ñ‡∏î‡∏µ (Literature)": "literature"
                }
                
                questions, answers = generator.generate_thai_worksheet(
                    selected_thai_topic, 
                    selected_thai_grade,
                    num_q,
                    exercise_mapping.get(exercise_type, "mix")
                )
                
                pdf = generator.create_pdf(title, school_name, selected_thai_topic, questions, answers, qr_url, uploaded_logo)
                word = generator.create_word_doc(title, school_name, selected_thai_topic, questions, answers)
                
                st.session_state.generated_pdf = pdf
                st.session_state.generated_word = word
                st.session_state.generated_filename = "thai_worksheet"
    
    # Show download buttons if content is generated
    if st.session_state.generated_pdf is not None and st.session_state.get("generated_filename") == "thai_worksheet":
        st.success("‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á")
        c1, c2 = st.columns(2)
        c1.download_button("üìÑ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î PDF", st.session_state.generated_pdf, f"{st.session_state.generated_filename}.pdf", "application/pdf")
        c2.download_button("üìù ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Word", st.session_state.generated_word, f"{st.session_state.generated_filename}.docx", "application/vnd.openxmlformats-officedocument.wordprocessingml.document")
        
        if st.button("üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà"):
            st.session_state.generated_pdf = None
            st.session_state.generated_word = None
            st.rerun()

elif "‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©" in mode_select:
    st.subheader("üåè ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© (English Language)")
    
    # English Language Curriculum Data
    english_topics = {
        # ===== ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏ñ‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤ =====
        "‡∏õ.1": [
            ("1Ô∏è‚É£", "Alphabet (A-Z uppercase/lowercase)", "ai"),
            ("2Ô∏è‚É£", "Phonics (Aa-Zz sounds)", "ai"),
            ("3Ô∏è‚É£", "Numbers 1-10 (counting)", "ai"),
            ("4Ô∏è‚É£", "Colors (Red, blue, green, yellow, etc.)", "ai"),
            ("5Ô∏è‚É£", "Shapes (Circle, square, triangle, etc.)", "ai"),
            ("6Ô∏è‚É£", "Body Parts (Head, eyes, ears, nose, etc.)", "ai"),
            ("7Ô∏è‚É£", "Family (Mother, father, sister, brother)", "ai"),
            ("8Ô∏è‚É£", "Animals (Cat, dog, bird, fish, etc.)", "ai"),
        ],
        "‡∏õ.2": [
            ("1Ô∏è‚É£", "Numbers 11-100 (counting)", "ai"),
            ("2Ô∏è‚É£", "Days & Months (Monday-Sunday, Jan-Dec)", "ai"),
            ("3Ô∏è‚É£", "Time (O'clock, half past)", "ai"),
            ("4Ô∏è‚É£", "Food & Drinks (Rice, bread, water, milk)", "ai"),
            ("5Ô∏è‚É£", "Clothing (Shirt, pants, dress, shoes)", "ai"),
            ("6Ô∏è‚É£", "Weather (Hot, cold, rainy, sunny)", "ai"),
            ("7Ô∏è‚É£", "Places (School, home, market, hospital)", "ai"),
            ("8Ô∏è‚É£", "Greetings (Hello, goodbye, thank you)", "ai"),
        ],
        "‡∏õ.3": [
            ("1Ô∏è‚É£", "Present Simple (I am, you are, he/she is)", "ai"),
            ("2Ô∏è‚É£", "This-That-These-Those", "ai"),
            ("3Ô∏è‚É£", "Have-Has (possession)", "ai"),
            ("4Ô∏è‚É£", "Prepositions (In, on, under, behind)", "ai"),
            ("5Ô∏è‚É£", "WH-Questions (What, Where, When, Why, Who)", "ai"),
            ("6Ô∏è‚É£", "Daily Routines (Wake up, eat breakfast)", "ai"),
            ("7Ô∏è‚É£", "Occupations (Doctor, teacher, farmer)", "ai"),
            ("8Ô∏è‚É£", "Adjectives (Big, small, tall, beautiful)", "ai"),
        ],
        "‡∏õ.4": [
            ("1Ô∏è‚É£", "Past Simple (was/were)", "ai"),
            ("2Ô∏è‚É£", "Regular Verbs (Played, watched, cleaned)", "ai"),
            ("3Ô∏è‚É£", "Irregular Verbs (Went, ate, drank, saw)", "ai"),
            ("4Ô∏è‚É£", "Object Pronouns (Me, him, her, us, them)", "ai"),
            ("5Ô∏è‚É£", "There is-There are", "ai"),
            ("6Ô∏è‚É£", "Commands (Open the door, close the window)", "ai"),
            ("7Ô∏è‚É£", "Descriptions (Describing people/things)", "ai"),
            ("8Ô∏è‚É£", "School Subjects (Math, English, Science, Art)", "ai"),
        ],
        "‡∏õ.5": [
            ("1Ô∏è‚É£", "Future Will-Going to", "ai"),
            ("2Ô∏è‚É£", "Present Continuous (am/is/are + verb-ing)", "ai"),
            ("3Ô∏è‚É£", "Can-Could (ability, permission)", "ai"),
            ("4Ô∏è‚É£", "Some-Any", "ai"),
            ("5Ô∏è‚É£", "Telling Time (Quarter past, quarter to)", "ai"),
            ("6Ô∏è‚É£", "Giving Directions (Turn left, turn right)", "ai"),
            ("7Ô∏è‚É£", "Invitations (Would you like...?, Let's...)", "ai"),
            ("8Ô∏è‚É£", "Letter Writing (Formal and informal)", "ai"),
        ],
        "‡∏õ.6": [
            ("1Ô∏è‚É£", "Tenses Review (Present, Past, Future)", "ai"),
            ("2Ô∏è‚É£", "Modal Verbs (Must, should, have to, may)", "ai"),
            ("3Ô∏è‚É£", "Passive Voice (is/are + verb3)", "ai"),
            ("4Ô∏è‚É£", "If Clauses (Conditionals type 1)", "ai"),
            ("5Ô∏è‚É£", "Reported Speech (Said, told, asked)", "ai"),
            ("6Ô∏è‚É£", "Conjunctions (And, but, or, because, so)", "ai"),
            ("7Ô∏è‚É£", "Reading Comprehension (Passages, questions)", "ai"),
            ("8Ô∏è‚É£", "Paragraph Writing (3-5 sentences)", "ai"),
        ],
        
        # ===== ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡∏≠‡∏ô‡∏ï‡πâ‡∏ô =====
        "‡∏°.1": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "Present Perfect (have/has + verb3)", "ai"),
                ("2Ô∏è‚É£", "Since-For (time expressions)", "ai"),
                ("3Ô∏è‚É£", "Tag Questions (aren't you?, isn't it?)", "ai"),
                ("4Ô∏è‚É£", "Relative Clauses (Who, which, that)", "ai"),
                ("5Ô∏è‚É£", "Gerunds & Infinitives", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "Making Suggestions (Let's, Why don't we)", "ai"),
                ("2Ô∏è‚É£", "Phone Conversations", "ai"),
                ("3Ô∏è‚É£", "Shopping & Money", "ai"),
                ("4Ô∏è‚É£", "Travel & Transportation üåü", "ai"),
                ("5Ô∏è‚É£", "Health & Fitness üåü", "ai"),
            ]
        },
        "‡∏°.2": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "Past Continuous (was/were + verb-ing)", "ai"),
                ("2Ô∏è‚É£", "Future Continuous (will be + verb-ing)", "ai"),
                ("3Ô∏è‚É£", "Conditionals Type 2 (If I were, I would)", "ai"),
                ("4Ô∏è‚É£", "Reported Questions", "ai"),
                ("5Ô∏è‚É£", "Quantifiers (Much, many, a few, a little)", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "Comparison (Adjectives, adverbs)", "ai"),
                ("2Ô∏è‚É£", "Wish Sentences (I wish I could...)", "ai"),
                ("3Ô∏è‚É£", "Email Writing (Formal and informal)", "ai"),
                ("4Ô∏è‚É£", "News Writing üåü", "ai"),
                ("5Ô∏è‚É£", "Story Writing üåü", "ai"),
            ]
        },
        "‡∏°.3": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "Conditionals All Types (Type 1, 2, 3)", "ai"),
                ("2Ô∏è‚É£", "Passive Voice (All tenses)", "ai"),
                ("3Ô∏è‚É£", "Reported Speech (All reporting verbs)", "ai"),
                ("4Ô∏è‚É£", "Gerunds & Infinitives (Special uses)", "ai"),
                ("5Ô∏è‚É£", "Modal Perfects (Should have, could have)", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "Articles (A, an, the, zero article)", "ai"),
                ("2Ô∏è‚É£", "Essay Writing (Opinion, comparison)", "ai"),
                ("3Ô∏è‚É£", "O-NET Preparation (Grammar, vocabulary)", "ai"),
                ("4Ô∏è‚É£", "Critical Reading üåü", "ai"),
                ("5Ô∏è‚É£", "Creative Writing üåü", "ai"),
            ]
        },
        
        # ===== ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏°‡∏±‡∏ò‡∏¢‡∏°‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ï‡∏≠‡∏ô‡∏õ‡∏•‡∏≤‡∏¢ =====
        "‡∏°.4": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "Narrative Tenses (Past perfect)", "ai"),
                ("2Ô∏è‚É£", "Future Perfect (will have + verb3)", "ai"),
                ("3Ô∏è‚É£", "Mixed Conditionals", "ai"),
                ("4Ô∏è‚É£", "Wish-Remorse (I wish I had...)", "ai"),
                ("5Ô∏è‚É£", "Linking Words (However, although, despite)", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "Paragraph Development", "ai"),
                ("2Ô∏è‚É£", "Speaking: Opinions (I think, In my opinion)", "ai"),
                ("3Ô∏è‚É£", "Vocabulary 1500 (Word families, synonyms)", "ai"),
                ("4Ô∏è‚É£", "Academic Vocabulary üåü", "ai"),
                ("5Ô∏è‚É£", "Debating Skills üåü", "ai"),
            ]
        },
        "‡∏°.5": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "Mixed Tenses Review", "ai"),
                ("2Ô∏è‚É£", "Modal Verbs Review (Must, have to, should)", "ai"),
                ("3Ô∏è‚É£", "Participle Clauses", "ai"),
                ("4Ô∏è‚É£", "Passive Voice Review", "ai"),
                ("5Ô∏è‚É£", "Essay Types (Argumentative, descriptive)", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "Speaking: Debating (Agree/disagree)", "ai"),
                ("2Ô∏è‚É£", "Listening Skills (News, interviews)", "ai"),
                ("3Ô∏è‚É£‚É£", "Vocabulary 2000 (Idioms, phrasal verbs)", "ai"),
                ("4Ô∏è‚É£", "Academic Writing üåü", "ai"),
                ("5Ô∏è‚É£", "Presentation Skills üåü", "ai"),
            ]
        },
        "‡∏°.6": {
            "‡πÄ‡∏ó‡∏≠‡∏° 1": [
                ("1Ô∏è‚É£", "Advanced Grammar (Inversion, emphasis)", "ai"),
                ("2Ô∏è‚É£", "Academic Writing (Research, citations)", "ai"),
                ("3Ô∏è‚É£", "Critical Reading (Analysis, inference)", "ai"),
                ("4Ô∏è‚É£", "Presentation Skills", "ai"),
            ],
            "‡πÄ‡∏ó‡∏≠‡∏° 2": [
                ("1Ô∏è‚É£", "Test Preparation (O-NET, University entrance)", "ai"),
                ("2Ô∏è‚É£", "Career English (Resume, interview)", "ai"),
                ("3Ô∏è‚É£", "Global Issues (Environment, technology)", "ai"),
                ("4Ô∏è‚É£", "Literature (Poems, short stories)", "ai"),
            ]
        },
    }
    
    # Grade Selection
    english_grade_options = ["‡∏õ.1", "‡∏õ.2", "‡∏õ.3", "‡∏õ.4", "‡∏õ.5", "‡∏õ.6", "‡∏°.1", "‡∏°.2", "‡∏°.3", "‡∏°.4", "‡∏°.5", "‡∏°.6"]
    english_grade_select = st.selectbox("üìö ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô:", english_grade_options)
    
    # Check if grade is ‡∏°.1-6 (has terms)
    if english_grade_select in ["‡∏°.1", "‡∏°.2", "‡∏°.3", "‡∏°.4", "‡∏°.5", "‡∏°.6"]:
        # Select term first
        english_term_options = list(english_topics[english_grade_select].keys())
        english_term_select = st.selectbox("üìÖ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ó‡∏≠‡∏°:", english_term_options)
        english_topics_list = english_topics[english_grade_select][english_term_select]
        selected_english_grade = english_grade_select
    else:
        # Primary school grades
        english_topics_list = english_topics.get(english_grade_select, [])
        selected_english_grade = english_grade_select
    
    # Topic selection with display names
    english_topic_options = [f"{prefix} {name}" for prefix, name, _ in english_topics_list]
    english_topic_select = st.selectbox("üìñ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠:", english_topic_options)
    
    # Get selected topic details
    selected_english_topic = None
    for prefix, name, topic_type in english_topics_list:
        full_name = f"{prefix} {name}"
        if full_name == english_topic_select:
            # Remove üåü for backend
            clean_name = name.replace(" üåü", "")
            selected_english_topic = clean_name
            break
    
        st.info("üìå ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ AI ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏Ñ‡πà‡∏∞")
    
    # Exercise type selector
    exercise_types = [
        "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ú‡∏™‡∏°‡∏ú‡∏™‡∏≤‡∏ô - All Types)",
        "‡πÑ‡∏ß‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå (Grammar Exercises)",
        "‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå (Vocabulary)",
        "‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô (Reading Comprehension)",
        "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô (Writing)",
        "‡∏Å‡∏≤‡∏£‡∏ü‡∏±‡∏á (Listening Scripts)",
        "‡∏Å‡∏≤‡∏£‡∏û‡∏π‡∏î (Speaking Prompts)"
    ]
    exercise_type = st.selectbox("üìù ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î:", exercise_types)
    
    num_q = st.slider("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠", 10, 50, 20)
    
    if st.button("üöÄ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©", type="primary"):
        if not st.session_state.api_key:
            st.info("üîë ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ API Key ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡∏Ñ‡πà‡∏∞ ‡∏Å‡∏£‡∏≠‡∏Å API Key ‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡∏ô‡∏∞‡∏Ñ‡∏∞")
        else:
            with st.spinner("ü§ñ AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©..."):
                # Map exercise type to prompt
                exercise_mapping = {
                    "‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (‡∏ú‡∏™‡∏°‡∏ú‡∏™‡∏≤‡∏ô - All Types)": "mix",
                    "‡πÑ‡∏ß‡∏¢‡∏≤‡∏Å‡∏£‡∏ì‡πå (Grammar Exercises)": "grammar",
                    "‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå (Vocabulary)": "vocabulary",
                    "‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô (Reading Comprehension)": "reading",
                    "‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô (Writing)": "writing",
                    "‡∏Å‡∏≤‡∏£‡∏ü‡∏±‡∏á (Listening Scripts)": "listening",
                    "‡∏Å‡∏≤‡∏£‡∏û‡∏π‡∏î (Speaking Prompts)": "speaking"
                }
                
                questions, answers = generator.generate_english_worksheet(
                    selected_english_topic, 
                    selected_english_grade,
                    num_q,
                    exercise_mapping.get(exercise_type, "mix")
                )
                
                pdf = generator.create_pdf(title, school_name, selected_english_topic, questions, answers, qr_url, uploaded_logo)
                word = generator.create_word_doc(title, school_name, selected_english_topic, questions, answers)
                
                st.session_state.generated_pdf = pdf
                st.session_state.generated_word = word
                st.session_state.generated_filename = "english_worksheet"
    
    # Show download buttons if content is generated
    if st.session_state.generated_pdf is not None and st.session_state.get("generated_filename") == "english_worksheet":
        st.success("‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á")
        c1, c2 = st.columns(2)
        c1.download_button("üìÑ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î PDF", st.session_state.generated_pdf, f"{st.session_state.generated_filename}.pdf", "application/pdf")
        c2.download_button("üìù ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Word", st.session_state.generated_word, f"{st.session_state.generated_filename}.docx", "application/vnd.openxmlformats-officedocument.wordprocessingml.document")
        
        if st.button("üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà"):
            st.session_state.generated_pdf = None
            st.session_state.generated_word = None
            st.rerun()

elif "‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤ AI" in mode_select:
    st.subheader("ü§ñ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏î‡πâ‡∏ß‡∏¢ AI")
    
    if not st.session_state.api_key:
        show_api_warning()
    else:
        col1, col2 = st.columns(2)
        with col1:
            topic = st.text_input("‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ (‡πÄ‡∏ä‡πà‡∏ô ‡∏≠‡∏ß‡∏Å‡∏≤‡∏®, ‡∏™‡∏ß‡∏ô‡∏™‡∏±‡∏ï‡∏ß‡πå, ‡∏ï‡∏•‡∏≤‡∏î)", "‡∏Å‡∏≤‡∏£‡∏ú‡∏à‡∏ç‡∏†‡∏±‡∏¢‡πÉ‡∏ô‡∏≠‡∏ß‡∏Å‡∏≤‡∏®")
            grade = st.selectbox("‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô", ["‡∏õ.1", "‡∏õ.2", "‡∏õ.3", "‡∏õ.4", "‡∏õ.5", "‡∏õ.6"])
        with col2:
            num_q = st.slider("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠", 3, 15, 5)
        
        if st.button("üöÄ ‡πÉ‡∏´‡πâ AI ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå", type="primary"):
            with st.spinner("AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏¥‡∏î‡πÇ‡∏à‡∏ó‡∏¢‡πå... (‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö)"):
                grade_map = {"‡∏õ.1": "Grade 1", "‡∏õ.2": "Grade 2", "‡∏õ.3": "Grade 3", "‡∏õ.4": "Grade 4", "‡∏õ.5": "Grade 5", "‡∏õ.6": "Grade 6"}
                questions, answers = generator.generate_ai_word_problems(topic, grade_map.get(grade, "Grade 3"), num_q)
                
                pdf = generator.create_pdf(title, school_name, "AI Word Problems", questions, answers, qr_url, uploaded_logo)
                word = generator.create_word_doc(title, school_name, "AI Word Problems", questions, answers)
                
                st.success("‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!")
                c1, c2 = st.columns(2)
                c1.download_button("üìÑ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î PDF", pdf, "ai_worksheet.pdf", "application/pdf")
                c2.download_button("üìù ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Word", word, "ai_worksheet.docx", "application/vnd.openxmlformats-officedocument.wordprocessingml.document")

elif "‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏´‡∏≤‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå" in mode_select:
    st.subheader("üîç ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡∏´‡∏≤‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå (Word Search)")
    words_input = st.text_area("‡πÉ‡∏™‡πà‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏© (‡∏Ñ‡∏±‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏à‡∏∏‡∏•‡∏†‡∏≤‡∏Ñ ,)", "CAT, DOG, BIRD, LION, TIGER")
    words = [w.strip() for w in words_input.split(",") if w.strip()]
    
    if st.button("üöÄ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤", type="primary"):
        grid, placed_words = generator.generate_word_search(words)
        pdf = generator.create_pdf(title, school_name, "Word Search", (grid, placed_words), answers=placed_words, qr_link=qr_url, uploaded_logo=uploaded_logo)
        word = generator.create_word_doc(title, school_name, "Word Search", (grid, placed_words), answers=placed_words)
        
        st.success("‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏£‡∏¥‡∏®‡∏ô‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!")
        c1, c2 = st.columns(2)
        c1.download_button("üìÑ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î PDF", pdf, "puzzle.pdf", "application/pdf")
        c2.download_button("üìù ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Word", word, "puzzle.docx", "application/vnd.openxmlformats-officedocument.wordprocessingml.document")

elif "‡∏ù‡∏∂‡∏Å‡∏Ñ‡∏±‡∏î‡∏•‡∏≤‡∏¢‡∏°‡∏∑‡∏≠" in mode_select:
    st.subheader("‚úçÔ∏è ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏Ñ‡∏±‡∏î‡∏•‡∏≤‡∏¢‡∏°‡∏∑‡∏≠")
    text_input = st.text_area("‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏Ñ‡∏±‡∏î (‡∏Ñ‡∏±‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏à‡∏∏‡∏•‡∏†‡∏≤‡∏Ñ)", "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì, ‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©, ‡∏£‡∏±‡∏Å‡∏ô‡∏∞")
    
    if st.button("üöÄ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ö‡∏ö‡∏ù‡∏∂‡∏Å‡∏´‡∏±‡∏î", type="primary"):
        lines = generator.generate_tracing_lines(text_input)
        pdf = generator.create_pdf(title, school_name, "Handwriting Practice", lines, uploaded_logo=uploaded_logo)
        word = generator.create_word_doc(title, school_name, "Handwriting Practice", lines)
        
        st.success("‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!")
        c1, c2 = st.columns(2)
        c1.download_button("üìÑ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î PDF", pdf, "tracing.pdf", "application/pdf")
        c2.download_button("üìù ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Word", word, "tracing.docx", "application/vnd.openxmlformats-officedocument.wordprocessingml.document")

elif "‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå" in mode_select:
    st.subheader("üìù ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ (PDF/Word)")
    
    if not st.session_state.api_key:
        show_api_warning()
    else:
        uploaded_file = st.file_uploader("‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô (PDF ‡∏´‡∏£‡∏∑‡∏≠ Docx)", type=["pdf", "docx"])
        num_q = st.slider("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£", 3, 20, 5)
        
        if uploaded_file and st.button("üöÄ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå", type="primary"):
            with st.spinner("AI ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö..."):
                text = generator.extract_text_from_file(uploaded_file)
                
                if not text or "Error" in text:
                    st.error(f"‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß: {text}")
                else:
                    questions, answers = generator.generate_quiz_from_text(text, num_q)
                    
                    pdf = generator.create_pdf(title, school_name, "Quiz", questions, answers, qr_url, uploaded_logo)
                    word = generator.create_word_doc(title, school_name, "Quiz", questions, answers)
                    
                    st.success(f"‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö {len(questions)} ‡∏Ç‡πâ‡∏≠ ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!")
                    c1, c2 = st.columns(2)
                    c1.download_button("üìÑ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î PDF", pdf, "quiz.pdf", "application/pdf")
                    c2.download_button("üìù ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î Word", word, "quiz.docx", "application/vnd.openxmlformats-officedocument.wordprocessingml.document")
                    
                    with st.expander("‡∏î‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö"):
                        for q in questions:
                            st.text(q)
                            st.text("---")

st.markdown("---")
st.caption("‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏î‡∏¢ **Nong Aom & P'Em** | Powered by Google Gemini AI")
